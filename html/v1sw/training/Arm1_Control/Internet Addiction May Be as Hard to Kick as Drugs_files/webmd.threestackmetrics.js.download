/* repo: amd-modules/master@1.15.2-47-g7e6d3b8 - Package Version: 2.0.0 - 2018-05-07 05:47 pm - User:  */

define("webmd.threestackmetrics/1/webmd.threestackmetrics",function(){"use strict";var webmd_threestackmetrics={prefix:"ed-stknt_",posToValue:{923:1,924:2,925:3,1923:1,1924:2,1925:3},init:function(){var _this=this;$(".responsive-sharethrough-wrapper .responsive_sharethrough, .responsive-sharethrough-wrapper .bottom-ad-override").each(function(){_this.setupMetrics(this)})},setupMetrics:function(elm){var _this=this;$(elm).undelegate("div, a","click"),$(elm).delegate("div, a","click",function(e){var $this=$(this),$e=$this;(this.parentNode.className.toString().indexOf("responsive_sharethrough")>-1||this.parentNode.className.toString().indexOf("bottom-ad-override")>-1)&&this.id.toString().match(/responsive[-_]sharethrough/gi)&&("undefined"==typeof $this.data("pos")&&($e=_this.getPosElementWithId($this)||$this,$this.data("pos",$e.data("pos"))),_this.metricsWithPos($this))})},metricsWithPos:function($e){this.trackLink($e,this.prefix+this.convertPos($e.data("pos")))},getPosElementWithId:function($e){var posDiv;return"string"==typeof $e.attr("id")&&$e.attr("id").match(/responsive[-_]sharethrough/gi)&&(posDiv=$("#"+$e.attr("id").replace("EMBED-STR-ADUNIT-","")),posDiv.length>0&&posDiv.data("pos"))?posDiv:(webmd.debug("Could not save metrics for 3stack node: "+$e.attr("id")),!1)},trackLink:function($e,link){var rgx=new RegExp(this.prefix+"\\d+","gi");return rgx.test(link)?($e.find(".webmd-internal").length>0?setTimeout(function(){wmdTrack(link)}):wmdPageLink(link),!0):(webmd.debug("Could no save metric for 3stack node: "+$e.attr("id")+" the link was "+link),!1)},convertPos:function(pos){return"undefined"!=typeof this.posToValue[pos]?this.posToValue[pos]:pos}};return window.webmd=window.webmd||{},window.webmd.threestackmetrics=webmd_threestackmetrics,webmd_threestackmetrics});
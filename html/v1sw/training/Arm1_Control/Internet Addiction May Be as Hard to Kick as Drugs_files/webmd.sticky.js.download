/* repo: amd-modules/release-sticky-plugin-destroy-blank-fix@2.10.1-0-gc28122c - Package Version: 2.10.1 - 2019-10-03 03:39 pm - User:  */

define("webmd.sticky/2/webmd.sticky",function(){"use strict";function Sticky(conf){this.config=conf,this.scrollEventName="scrollEvent_"+Math.random(),this.startOnTouch=!1,this.started=!1,this.$e=null,this.ceiling=!1,this.ceilingReached=!1,this.floor=!1,this.floorReached=!1,this.blank=!0,this.className=conf.className||null,this.css=conf.css||{background:"white",top:"0px"},this.timer=conf.timer||0,this.elCssStorage=null,this.unstick=conf.unstick||"normal",this.noFloorCeil=!1,this.noStartOnTouch=!1,this._unstickTransitionTO1=null,this._unstickTransitionTO2=null;var self=this;return"undefined"!=typeof this.config.blank&&(this.blank=this.config.blank),this.setElement()?(this.setCeiling(),this.setFloor(),this.config.startOnTouch?this.startOnTouch=!0:this.config.delay&&!isNaN(this.config.delay)?setTimeout(function(){self.run()},this.config.delay):this.run(),void this.startScrollEvent()):void(webmd&&webmd.debug&&webmd.debug("Element does not exist"))}return Sticky.prototype.run=function(){var self=this;return this.started=!0,$(window).trigger("webmd.sticky.started",[this]),this.setElement()?(this.setCeiling(),this.setFloor(),this.blank&&this.createBlank(this.blank),this.stickElement(this.css),self.checkCeiling()&&(self.stopElementAtCeiling(),self.noStartOnTouch=!1),self.checkFloor()&&(self.stopElementAtFloor(),self.noStartOnTouch=!1),void(this.timer>0&&setTimeout(function(){self.end()},this.timer))):void(webmd&&webmd.debug&&webmd.debug("Element does not exist"))},Sticky.prototype.setElement=function(){return"string"==typeof this.config.element?this.$e=$("#"+this.config.element.replace(/^#/g,"")):this.$e=$(this.config.element),!(this.$e.length<1)&&(null===this.elCssStorage&&(this.elCssStorage={position:this.$e.css("position"),zIndex:this.$e.css("z-index"),top:this.$e.css("top"),positionTop:this.$e.position().top,postionLeft:this.$e.position().left}),!0)},Sticky.prototype.addClass=function(className){$(this.$e).addClass(className)},Sticky.prototype.removeClass=function(className){$(this.$e).removeClass(className)},Sticky.prototype.setCeiling=function(ceiling){this._setCeiling(ceiling),$(window).trigger("webmd.sticky.setceiling",[this])},Sticky.prototype._setCeiling=function(ceiling){var $c;"undefined"!=typeof ceiling&&null!==ceiling&&(this.config.ceiling=ceiling),"undefined"!=typeof this.config.ceiling&&null!==this.config.ceiling&&this.config.ceiling!==!1&&(this.config.ceiling===!0&&this.ceiling===!1?this.ceiling=parseInt(this.$e.offset().top,10)+"px":isNaN(parseInt(this.config.ceiling,10))?"string"==typeof this.config.ceiling?($c=$("#"+this.config.ceiling.replace(/^#/g,"")),this.ceiling=parseInt($c.offset().top,10)+parseInt($c.height(),10)+"px"):"object"==typeof this.config.ceiling&&($c=$(this.config.ceiling),this.ceiling=parseInt($c.offset().top,10)+parseInt($c.height(),10)+"px"):this.ceiling=this.config.ceiling)},Sticky.prototype.checkCeiling=function(delta){delta=delta||10,this._setCeiling();var ceiling,eltop=parseInt(this.$e.offset().top,10);return!!(this.ceiling&&(ceiling=String(this.ceiling).indexOf("%")>-1?parseInt($(window).height(),10)*parseInt(this.ceiling,10)/100:parseInt(this.ceiling,10),ceiling+delta>eltop))&&ceiling},Sticky.prototype.stopElementAtCeiling=function(){var ceiling=this.checkCeiling();this.ceilingReached||(this.$e.css({position:"absolute"}),ceiling-=parseInt(this.$e.offset().top,10)-parseInt(this.$e.position().top,10),this.$e.css({top:ceiling+"px"}),this.ceilingReached=!0,$(window).trigger("webmd.sticky.ceiling.reached",[this]))},Sticky.prototype.unsetCeiling=function(){this.config.ceiling=null,this.ceiling=null,$(window).trigger("webmd.sticky.unsetceiling",[this])},Sticky.prototype.setFloor=function(floor){this._setFloor(floor),$(window).trigger("webmd.sticky.setfloor",[this])},Sticky.prototype._setFloor=function(floor){var $c;"undefined"!=typeof floor&&null!==floor&&(this.config.floor=floor),"undefined"!=typeof this.config.floor&&null!==this.config.floor&&this.config.floor!==!1&&(this.config.floor===!0&&this.floor===!1?this.floor=parseInt(this.$e.offset().top,10)+parseInt(this.$e.height(),10)+"px":isNaN(parseInt(this.config.floor,10))?"string"==typeof this.config.floor?($c=$("#"+this.config.floor.replace(/^#/g,"")),this.floor=parseInt($c.offset().top,10)+"px"):"object"==typeof this.config.floor&&($c=$(this.config.floor),this.floor=parseInt($c.offset().top,10)+"px"):this.floor=this.config.floor)},Sticky.prototype.checkFloor=function(delta){delta=delta||10,this._setFloor();var floor,elbottom=parseInt(this.$e.offset().top,10)+parseInt(this.$e.height(),10);return!!(this.floor&&(floor="string"==typeof this.floor&&this.floor.indexOf("%")>-1?parseInt($(window).height(),10)*parseInt(this.floor,10)/100:parseInt(this.floor,10),floor+delta<elbottom))&&floor},Sticky.prototype.stopElementAtFloor=function(){var top,floor=this.checkFloor();this.floorReached||(top=floor-(parseInt(this.$e.height(),10)-10),this.$e.css({position:"absolute"}),top-=parseInt(this.$e.offset().top,10)-parseInt(this.$e.position().top,10),this.$e.css({top:top+"px"}),this.floorReached=!0,$(window).trigger("webmd.sticky.floor.reached",[this]))},Sticky.prototype.unsetFloor=function(){this.config.floor=null,this.floor=null,$(window).trigger("webmd.sticky.unsetfloor",[this])},Sticky.prototype.end=function(s){s=s||0,this.config={},this.started=!1,this.removeScrollEvent(),this.unstickElement(s)},Sticky.prototype.createBlank=function(cssobj){var self=this,cssKeys=["height","width","padding","margin","background"],$blank=$("<div />");$.each(cssKeys,function(k,v){"object"==typeof cssobj&&cssobj[v]?("height"!==v&&"width"!==v||(cssobj[v]=parseInt(cssobj[v],10)+"px"),$blank.css(v,cssobj[v])):"height"===v||"width"===v?$blank.css(v,self.$e[v]()+"px"):$blank.css(v,self.$e.css(v))}),$blank.insertBefore(self.$e),this.$blank=$blank,$(window).trigger("webmd.sticky.createblank",[this])},Sticky.prototype.destroyBlank=function(){this.$blank&&this.$blank.length>0&&(this.$blank.remove(),$(window).trigger("webmd.sticky.removeblank",[this]))},Sticky.prototype.stickElement=function(css,className){this._stickElement(css),className&&(this.className=className),this.className&&this.addClass(this.className),$(window).trigger("webmd.sticky.stick",[this])},Sticky.prototype._stickElement=function(css){var self=this;css=css||this.css,this.css=css,$.each(css,function(i,v){self.$e.css(i,v)}),this.$e.css({position:"fixed","z-index":css["z-index"]||css.zIndex||1e4,top:css.top||"0px"}),this.ceilingReached=!1,this.floorReached=!1},Sticky.prototype.unstickElement=function(s){var top,self=this,resetSticky=function(){self.destroyBlank(),self.$e.css({position:self.elCssStorage.position,top:self.elCssStorage.top,"z-index":self.elCssStorage.zIndex}),self.className&&self.removeClass(self.className),$(window).trigger("webmd.sticky.finished",[self])};return s=s||0,null!==this._unstickTransitionTO1&&(clearTimeout(this._unstickTransitionTO1),this._unstickTransitionTO1=null),null!==this._unstickTransitionTO2&&(clearTimeout(this._unstickTransitionTO2),this._unstickTransitionTO2=null),0===s&&"normal"===this.unstick?void resetSticky():(0===s&&"ease"===this.unstick&&(s=2e3),0!==s||isNaN(parseInt(this.unstick,10))||(s=parseInt(this.unstick,10)),void(s>0&&(top=parseInt(this.$e.offset().top,10),this.$e.css({position:"absolute"}),top-=parseInt(this.$e.offset().top,10)-parseInt(this.$e.position().top,10),this.$e.css({top:top+"px"}),this._unstickTransitionTO1=setTimeout(function(){self.$e.css({transition:"top "+Math.floor(s/1e3)+"s"}),setTimeout(function(){self.$e.css({top:parseInt(self.elCssStorage.positionTop,10)+"px"})})}),this._unstickTransitionTO2=setTimeout(function(){self.$e.css({transition:"top 0s"}),resetSticky()},s+100))))},Sticky.prototype.updatePosition=function(){"absolute"===this.$e.css("position")&&this._stickElement()},Sticky.prototype.checkElementToWindow=function(){var d=parseInt($(window).scrollTop(),10);return"undefined"!=typeof this.config.startOnTouch&&"undefined"!=typeof this.config.startOnTouch.offset&&(d+=parseInt(this.config.startOnTouch.offset,10)),Math.abs(d-parseInt(this.$e.offset().top,10))<200},Sticky.prototype.startScrollEvent=function(){var self=this;$(window).bind("scroll.scroll."+this.scrollEventName,function(e){try{if(self.startOnTouch&&self.checkElementToWindow())return self.startOnTouch=!1,void self.run();if(!self.started)return;self.updatePosition(),!self.noStartOnTouch&&self.checkElementToWindow()&&self.checkCeiling(-50)===!1&&self.checkFloor(100)===!1&&(self.stickElement(),self.noStartOnTouch=!0),self.checkCeiling()&&(self.stopElementAtCeiling(),self.noStartOnTouch=!1),self.checkFloor()&&(self.stopElementAtFloor(),self.noStartOnTouch=!1)}catch(e){webmd&&webmd.debug&&webmd.debug("sticky scroll event error",e.message)}})},Sticky.prototype.removeScrollEvent=function(){$(window).unbind("scroll."+this.scrollEventName)},webmd.sticky={init:function(conf){return new Sticky(conf)}},webmd.sticky});